# ๐ FlyPlaza Workflow

## ๐ ะกัััะบัััะฐ ะฒะตัะพะบ

```
LOCAL (ัะฐะทัะฐะฑะพัะบะฐ ะฑะตะท ะบะพะผะผะธัะพะฒ)
  โ
STAGE (ะฟะตัะฒัะน ะบะพะผะผะธั ะฒ Git)
  โ
PRODUCTION (ะผะตัะถ ะธะท stage)
  โ
SERVER (flyplaza.ru)
```

---

## โ๏ธ ะะะะะ: ะะะ ะะะะะขะะะข ะะะะฆะะกะก

### ๐ด LOCAL - ะะ ะะะะะะขะะ ะ GIT!
- ะะฐะทัะฐะฑะฐััะฒะฐะตะผ ะฝะฐ ะฒะตัะบะต **stage** ะปะพะบะฐะปัะฝะพ
- ะะ ะบะพะผะผะธัะธะผ ะธะทะผะตะฝะตะฝะธั
- ะขะตััะธััะตะผ ะฝะฐ `localhost:3002`

### ๐ข STAGE - ะะะะะซะ ะะะะะะข
- ะะพะณะดะฐ ะณะพัะพะฒั, ะบะพะผะผะธัะธะผ ะฒ ะฒะตัะบั **stage**
- ะญัะพ ะฟะตัะฒัะน ะบะพะผะผะธั ะฒ Git
- ะัะฟัะฐะฒะปัะตะผ ะฝะฐ GitHub

### ๐ก PRODUCTION - ะะะะ
- ะะพัะปะต ะฟัะพะฒะตัะบะธ ััะฐะฑะธะปัะฝะพััะธ
- ะะตัะถะธะผ **stage** โ **production**

### ๐ต SERVER - ะะะะะะ
- ะะตะฟะปะพะธะผ ะขะะะฌะะ ั ะฒะตัะบะธ **production**

---

## ๐ ะัะพัะตัั ัะฐะทัะฐะฑะพัะบะธ

### 1๏ธโฃ ะะฐะทัะฐะฑะพัะบะฐ (local ะฝะฐ ะฒะตัะบะต stage)

**ะขะตะบััะฐั ะฒะตัะบะฐ:** stage  
**ะงัะพ ะดะตะปะฐะตะผ:**
- ะะฝะพัะธะผ ะธะทะผะตะฝะตะฝะธั ะฒ ะบะพะด
- ะขะตััะธััะตะผ ะปะพะบะฐะปัะฝะพ ะฝะฐ `localhost:3002`
- **ะะ ะะะะะะขะะ** ะฟะพะบะฐ ะฝะต ะณะพัะพะฒั

```bash
# ะฃะฑะตะดะธัะตัั, ััะพ ะฒั ะฝะฐ ะฒะตัะบะต stage
git checkout stage

# ะะฝะพัะธะผ ะธะทะผะตะฝะตะฝะธั ะฒ ัะฐะนะปั
# ะขะตััะธััะตะผ...
```

---

### 2๏ธโฃ ะะพะผะผะธั ะฒ STAGE

**ะะพะณะดะฐ:** ะะพะณะดะฐ ะธะทะผะตะฝะตะฝะธั ะณะพัะพะฒั ะธ ะฟัะพัะตััะธัะพะฒะฐะฝั

**ะะพะผะฐะฝะดะฐ:**
```bash
./commit-to-stage.sh
```

**ะงัะพ ะฟัะพะธััะพะดะธั:**
- ะะพะฑะฐะฒะปะตะฝะธะต ะฒัะตั ะธะทะผะตะฝะตะฝะธะน
- ะะพะผะผะธั ะฒ ะฒะตัะบั `stage`
- ะัั ะฒ GitHub (origin/stage)

---

### 3๏ธโฃ ะะตัะถ ะฒ PRODUCTION

**ะะพะณะดะฐ:** ะะพะณะดะฐ STAGE ััะฐะฑะธะปะตะฝ ะธ ะฟัะพะฒะตัะตะฝ

**ะะพะผะฐะฝะดะฐ:**
```bash
./merge-to-production.sh
```

**ะงัะพ ะฟัะพะธััะพะดะธั:**
- ะะฐะฟัะพั ะฟะพะดัะฒะตัะถะดะตะฝะธั
- ะะตัะตะบะปััะตะฝะธะต ะฝะฐ ะฒะตัะบั `production`
- ะะตัะถ ะธะทะผะตะฝะตะฝะธะน ะธะท `stage`
- ะัั ะฒ GitHub (origin/production)
- ะะพะทะฒัะฐั ะฝะฐ `stage`

---

### 4๏ธโฃ ะะตะฟะปะพะน ะฝะฐ ัะตัะฒะตั

**ะะพะณะดะฐ:** ะขะพะปัะบะพ ะฟะพัะปะต ะผะตัะถะฐ ะฒ PRODUCTION

**ะะพะผะฐะฝะดะฐ:**
```bash
./deploy-to-server.sh
```

**ะงัะพ ะฟัะพะธััะพะดะธั:**
- ะะพะดะบะปััะตะฝะธะต ะบ ัะตัะฒะตัั Timeweb
- ะะพะปััะตะฝะธะต ะฟะพัะปะตะดะฝะตะน ะฒะตััะธะธ ั ะฒะตัะบะธ `production`
- ะะตัะตัะฑะพัะบะฐ Docker-ะพะฑัะฐะทะฐ
- ะะตัะตะทะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะฐ

**ะะตะทัะปััะฐั:** ะกะฐะนั ะพะฑะฝะพะฒะปะตะฝ ะฝะฐ https://flyplaza.ru

---

## ๐ ะกัะตะผะฐ ัะฐะฑะพัั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 1. LOCAL (ัะฐะทัะฐะฑะพัะบะฐ ะฝะฐ ะฒะตัะบะต stage)                    โ
โ    โข ะะธัะตะผ ะบะพะด                                           โ
โ    โข ะขะตััะธััะตะผ ะปะพะบะฐะปัะฝะพ                                  โ
โ    โข ะะ ะบะพะผะผะธัะธะผ                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 2. STAGE (ะบะพะผะผะธั)                                        โ
โ    โข ./commit-to-stage.sh                                โ
โ    โข ะะตัะฒัะน ะบะพะผะผะธั ะฒ Git                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 3. PRODUCTION (ะผะตัะถ)                                     โ
โ    โข ./merge-to-production.sh                            โ
โ    โข ะะพัะพะฒะพ ะดะปั ะดะตะฟะปะพั                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 4. SERVER (flyplaza.ru)                                  โ
โ    โข ./deploy-to-server.sh                               โ
โ    โข ะกะฐะนั ะพะฑะฝะพะฒะปะตะฝ                                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โ๏ธ ะะฐะถะฝัะต ะฟัะฐะฒะธะปะฐ

1. **ะะฐะทัะฐะฑะพัะบะฐ ะฒะตะดะตััั ะฝะฐ ะฒะตัะบะต stage ะปะพะบะฐะปัะฝะพ**
2. **ะะ ะบะพะผะผะธัะธะผ ะดะพ ะณะพัะพะฒะฝะพััะธ**
3. **ะะตัะฒัะน ะบะพะผะผะธั ัะพะปัะบะพ ะฒ stage**
4. **ะะตัะถะธะผ ะฒ production ัะพะปัะบะพ ััะฐะฑะธะปัะฝัะน ะบะพะด**
5. **ะะตะฟะปะพะน ะขะะะฌะะ ั ะฒะตัะบะธ production**

---

## ๐ ะะตัะบะธ ะฒ Git

### โ stage
- **ะะฐะทะฝะฐัะตะฝะธะต:** ะะฐะทัะฐะฑะพัะบะฐ + ัะตััะธัะพะฒะฐะฝะธะต
- **ะะพะผะผะธัั:** ะะฐ, ะฒัะต ะบะพะผะผะธัั ััะดะฐ
- **Default ะฒะตัะบะฐ:** ะะฐ

### โ production
- **ะะฐะทะฝะฐัะตะฝะธะต:** ะัะพะดะฐะบัะตะฝ
- **ะะพะผะผะธัั:** ะะตั, ัะพะปัะบะพ ะผะตัะถ ะธะท stage
- **ะะตะฟะปะพะน:** ะขะพะปัะบะพ ะพัััะดะฐ

---

## ๐ ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั

### ะัะพะฒะตัะธัั ัะตะบัััั ะฒะตัะบั
```bash
git branch --show-current
```

### ะะพัะผะพััะตัั ััะฐััั (ะฝะตัะพััะฐะฝะตะฝะฝัะต ะธะทะผะตะฝะตะฝะธั)
```bash
git status
```

### ะะพัะผะพััะตัั ัะฐะทะปะธัะธั ะผะตะถะดั ะฒะตัะบะฐะผะธ
```bash
git diff stage..production
```

### ะะพัะผะพััะตัั ะธััะพัะธั
```bash
git log --oneline --graph
```

---

## ๐ ะคะฐะนะปั workflow

- `commit-to-stage.sh` - ะบะพะผะผะธั ะธะทะผะตะฝะตะฝะธะน ะฒ stage
- `merge-to-production.sh` - ะผะตัะถ stage โ production
- `deploy-to-server.sh` - ะดะตะฟะปะพะน production โ server
- `WORKFLOW.md` - ััะฐ ะธะฝััััะบัะธั

---

## ๐ ะัะปะธ ััะพ-ัะพ ะฟะพัะปะพ ะฝะต ัะฐะบ

### ะฃะฑะตะดะธัััั, ััะพ ะฝะฐ ะฒะตัะบะต stage
```bash
git checkout stage
```

### ะัะผะตะฝะธัั ะฟะพัะปะตะดะฝะธะน ะบะพะผะผะธั (ะฝะพ ัะพััะฐะฝะธัั ะธะทะผะตะฝะตะฝะธั)
```bash
git reset --soft HEAD~1
```

### ะัะบะฐัะธัั ะธะทะผะตะฝะตะฝะธั ะฒ ัะฐะนะปะต
```bash
git restore <filename>
```

### ะัะผะตะฝะธัั ะะกะ ะปะพะบะฐะปัะฝัะต ะธะทะผะตะฝะตะฝะธั
```bash
git restore .
```

---

## โ ะงะตะบะปะธัั ะฟะตัะตะด ะดะตะฟะปะพะตะผ

- [ ] ะะพะด ะฟัะพัะตััะธัะพะฒะฐะฝ ะปะพะบะฐะปัะฝะพ
- [ ] ะะทะผะตะฝะตะฝะธั ะทะฐะบะพะผะผะธัะตะฝั ะฒ stage (./commit-to-stage.sh)
- [ ] Stage ะฟัะพะฒะตัะตะฝ ะธ ััะฐะฑะธะปะตะฝ
- [ ] ะกะผะตัะถะตะฝะพ ะฒ production (./merge-to-production.sh)
- [ ] ะะพัะพะฒะพ ะบ ะดะตะฟะปะพั (./deploy-to-server.sh)

---

## ๐ฏ ะะฐะฟะพะผะฝะธัะต ะฟัะพัะตัั

```
LOCAL (stage ะปะพะบะฐะปัะฝะพ) โ STAGE (ะบะพะผะผะธั) โ PRODUCTION (ะผะตัะถ) โ SERVER (ะดะตะฟะปะพะน)
```

**ะะฐะทัะฐะฑะพัะบะฐ ะฝะฐ stage โ ะะพะผะผะธั ะฒ stage โ ะะตัะถ ะฒ production โ ะะตะฟะปะพะน ั production**
